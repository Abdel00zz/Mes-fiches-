/* 
  FicheBuilder Pro - Optimized Print Stylesheet 
  Target: A4 Paper, High Fidelity, "Beamer/LaTeX" Style
*/

@page {
  size: A4 portrait;
  margin: 15mm; 
}

/* --- Global Reset & Visibility --- */
body, html, #root {
  width: 100%;
  height: auto;
  margin: 0;
  padding: 0;
  background-color: white !important;
  color: #000000 !important;
  font-family: 'Inter', sans-serif;
  overflow: visible !important;
  -webkit-print-color-adjust: exact !important;
  print-color-adjust: exact !important;
}

/* Hide all screen-only elements */
.no-print, 
.screen-only,
.fixed, 
button, 
input, 
textarea,
[role="tooltip"],
.group\/inserter { 
  display: none !important; 
}

/* Show print-only elements */
.print-only {
  display: block !important;
}

/* --- Layout & Flow --- */
.print-flow {
  display: block;
  width: 100%;
  max-width: 100%;
}

/* Prevent blocks from being cut in half */
.avoid-break, 
.block-container,
.print-rich-zone {
  break-inside: avoid !important;
  page-break-inside: avoid !important;
  position: relative;
}

/* Ensure titles stay with their content */
h1, h2, h3, .section-header {
  break-after: avoid !important;
  page-break-after: avoid !important;
}

/* --- Typography & Content --- */
p, li, span, div {
  line-height: 1.5;
  font-size: 10.5pt; /* Standard academic font size */
}

/* Remove shadows for flat print look */
* {
  box-shadow: none !important;
  text-shadow: none !important;
}

/* --- Graphics & Images --- */
img, svg {
  max-width: 100%;
  break-inside: avoid;
}

.print-hq-image {
  image-rendering: -webkit-optimize-contrast;
  image-rendering: high-quality; /* Better scaling for printed images */
}

/* --- Specific Components --- */

/* Answer Zones - Ensure patterns (lines/grids) are visible */
.print-rich-zone {
  background-color: white !important;
  border: 1px solid #d1d5db !important; /* Gray-300 border, more subtle */
  opacity: 1 !important;
  display: block;
  width: 100%;
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

.print-rich-zone div {
  /* Force background patterns to print */
  -webkit-print-color-adjust: exact !important;
  print-color-adjust: exact !important;
}

/* Rich Block Style - keep colors and add a defined frame */
.block-container-print {
  /* The component's Tailwind classes will now provide the colors. */
  /* We just enhance the border to make it more pronounced for print. */
  border-width: 1px !important;
  border-style: solid !important;
  /* Adds a very subtle inner shadow to give depth, simulating a frame. */
  box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.05) !important;
}

/* Badges (Definition, Propriété, etc.) - Keep color for semantics */
[class*="bg-"] {
  -webkit-print-color-adjust: exact !important;
  print-color-adjust: exact !important;
}

/* MathJax Specifics */
mjx-container {
  overflow: visible !important;
  text-align: left !important;
}

.math-content {
  color: #000 !important;
}

/* Links */
a {
  text-decoration: none !important;
  color: #000 !important;
}